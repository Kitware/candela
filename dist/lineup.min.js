!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("candela/VisComponent"),require("candela"),require("d3"),require("jquery"),require("datalib"),require("font-awesome-webpack"),require("lineupjs"),require("lineupjs/build/style.css")):"function"==typeof define&&define.amd?define(["candela/VisComponent","candela","d3","jquery","datalib","font-awesome-webpack","lineupjs","lineupjs/build/style.css"],t):"object"==typeof exports?exports.candela=t(require("candela/VisComponent"),require("candela"),require("d3"),require("jquery"),require("datalib"),require("font-awesome-webpack"),require("lineupjs"),require("lineupjs/build/style.css")):e.candela=t(e["candela/VisComponent"],e.candela,e.d3,e.jquery,e.datalib,e["font-awesome-webpack"],e.lineupjs,e["lineupjs/build/style.css"])}(this,function(e,t,n,r,i,o,a,s){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}({0:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(2),o=r(i),a=n(24),s=r(a);o.default.register(s.default,"LineUp")},1:function(t,n){t.exports=e},2:function(e,n){e.exports=t},3:function(e,t){e.exports=n},5:function(e,t){e.exports=r},6:function(e,t){e.exports=i},13:function(e,t){e.exports=o},24:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(1),c=i(l),f=n(5),d=i(f),p=n(6),h=i(p),m=n(3),v=i(m),y=n(83),b=r(y);n(84),n(71),n(13);var g=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=n.width||800,s=n.height||600;return e.style.width=i+"px",e.style.height=s+"px",r.options=n,r.lineUpConfig={interaction:{tooltips:!1},renderingOptions:{animation:void 0===n.animation||n.animation,histograms:void 0===n.histograms||n.histograms,stacked:void 0!==n.stacked&&n.stacked},body:{mode:"separate",rowPadding:0},manipulative:!0},r.lineupInstances={},r.lineupColumns={},r.lineupRankWidth=50,r}return s(t,e),u(t,null,[{key:"options",get:function(){return[{name:"data",type:"table",format:"objectlist"},{name:"fields",type:"string_list",format:"string_list",domain:{mode:"field",from:"data",fieldTypes:["string","date","number","integer","boolean"]}},{name:"stacked",type:"boolean",format:"boolean",optional:!0},{name:"histograms",type:"boolean",format:"boolean",optional:!0},{name:"animation",type:"boolean",format:"boolean",optional:!0}]}}]),u(t,[{key:"lineupGetColumnWidth",value:function(e,t,n){var r=t.width||0,i=t.column||t.type;this.lineupColumns&&this.lineupColumns[e]&&this.lineupColumns[e][i]&&(r=this.lineupColumns[e][i]+n);var o=r<n?0:r-n;return"rank"===t&&(o=this.lineupRankWidth),t.widthBasis=o,t.widthFixed=n,t.widthBasis}},{key:"createLineupAdjustWidth",value:function(e,t,n,r){var i=0,o=0,a=0,s=void 0,u=void 0,l=(0,d.default)(e)[0].getBoundingClientRect().width-2*r-30,c=n.dataspec.layout.primary;for(s=0;s<c.length;s+=1)if(c[s].children)for(u=0;u<c[s].children.length;u+=1)a+=1,o+=this.lineupGetColumnWidth(t,c[s].children[u],r);else{if("rank"===c[s].type){i=this.lineupRankWidth+r;continue}a+=1,o+=this.lineupGetColumnWidth(t,c[s],r)}var f=l-a*r-i;f-=a+(i?1:0);var p=f/o;for(s=0;s<c.length;s+=1)if(c[s].children)for(u=0;u<c[s].children.length;u+=1)c[s].children[u].width=r+c[s].children[u].widthBasis*p;else c[s].width=r+c[s].widthBasis*p,"rank"===c[s].type&&(c[s].width=this.lineupRankWidth+r);return p}},{key:"createLineup",value:function(e,t,n,r,i,o,a){var s=this,u={};u.name=t,u.dataspec=n,delete u.dataspec.file,delete u.dataspec.separator,u.dataspec.data=r,u.storage=b.createLocalStorage(r,b.deriveColors(n.columns));var l=(i?i.config:d.default.extend({},this.lineUpConfig))||{};l.renderingOptions||(l.renderingOptions={});var c=l.renderingOptions.animation;l.renderingOptions.animation=!1;var f=5,p=this.createLineupAdjustWidth(e,t,u,f);if((0,d.default)(e).empty(),i=b.create(u.storage,v.default.select(e),this.lineUpConfig),i.restore(n),l=i.config,i.header.dragHandler.on("dragend.lineupWidget",function(e){s.lineupDragColumnEnd(t,e)}),i["column-scale"]=p,i["column-fixed"]=f,i["lineup-key"]=t,(0,d.default)(e).attr("lineup-key",t),o){var h=void 0;d.default.each(i.data.getRankings(),function(e,t){d.default.each(t.flatColumns,function(e,t){t.label===o&&(h=t.id)})}),i.sortBy(void 0!==h?h:o)}i.changeRenderingOption("animation",c);var m=function(){for(var t=0;t<n.columns.length;t+=1)if(n.columns[t].description){var r=n.columns[t].label||n.columns[t].column;(0,d.default)("title",(0,d.default)(e+' .lu-header text.headerLabel:contains("'+r+'")').parent()).text(r+": "+n.columns[t].description)}};return a&&(i.on("selectionChanged.lineupWidget",null),i.on("selectionChanged.lineupWidget",function(e){a(r[e])})),window.setTimeout(m,1),window.setTimeout(m,1e3),this.lineupInstances[t]=i,i}},{key:"lineupDragColumnEnd",value:function(e){var t=void 0,n=void 0;this.lineupColumns[e]||(this.lineupColumns[e]={});var r=this.lineupColumns[e],i=this.lineupInstances[e].dump().rankings[0].columns,o=this.lineupInstances[e]["column-scale"],a=this.lineupInstances[e]["column-fixed"];for(t=0;t<i.length;t+=1)if(i[t].children)for(n=0;n<i[t].children.length;n+=1)r[i[t].children[n].desc.split("@")[1]]=(i[t].children[n].width-a)/o;else r[i[t].desc.label?"rank":i[t].desc.split("@")[1]]=(i[t].width-a)/o}},{key:"render",value:function(){var e=d.default.extend(!0,[],this.options.data);if(e&&0!==e.length){var t={primaryKey:"__index",columns:[],layout:{primary:[{type:"rank",width:this.lineupRankWidth}]}},n={type:"stacked",label:"Combined",children:[]},r=p.type.inferAll(e),i=this.options.fields?this.options.fields:Object.keys(r),o=!0,a=!1,s=void 0;try{for(var u,l=(function(){var i=u.value;if(!(i in r))return"continue";var o=r[i];"integer"!==o&&"date"!==o||(o="number");var a={column:i,type:o};"number"===o&&(a.domain=h.default.extent(e,function(e){return e[i]})),t.columns.push(a);var s={column:i,width:200};"number"===o||"boolean"===o?n.children.push(s):t.layout.primary.push(s)}),c=i[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){l()}}catch(e){a=!0,s=e}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}n.children.length&&t.layout.primary.push(n),e.forEach(function(e,t){e.__index=t});var f="main";this.createLineup(this.el,"main",t,e,this.lineupInstances[f],"Combined")}}}]),t}(c.default);t.default=g},51:function(e,t,n){t=e.exports=n(52)(void 0),t.push([e.id,"div.lu{position:absolute;left:0;top:0;right:0;bottom:0;padding:0;overflow:auto}div.lu .header.stack .header_i .toolbar .fa.fa-toggle-left{display:none}",""])},52:function(e,t){function n(e,t){var n=e[1]||"",i=e[3];if(!i)return n;if(t&&"function"==typeof btoa){var o=r(i),a=i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"});return[n].concat(a).concat([o]).join("\n")}return[n].join("\n")}function r(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e)))),n="sourceMappingURL=data:application/json;charset=utf-8;base64,"+t;return"/*# "+n+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=n(t,e);return t[2]?"@media "+t[2]+"{"+r+"}":r}).join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),t.push(a))}},t}},71:function(e,t,n){var r=n(51);"string"==typeof r&&(r=[[e.id,r,""]]);var i,o={};o.transform=i;n(72)(r,o);r.locals&&(e.exports=r.locals)},72:function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++){var r=e[n],i=h[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(c(r.parts[o],t))}else{for(var a=[],o=0;o<r.parts.length;o++)a.push(c(r.parts[o],t));h[r.id]={id:r.id,refs:1,parts:a}}}}function i(e,t){for(var n=[],r={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s=o[1],u=o[2],l=o[3],c={css:s,media:u,sourceMap:l};r[a]?r[a].parts.push(c):n.push(r[a]={id:a,parts:[c]})}return n}function o(e,t){var n=y(e.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=w[w.length-1];if("top"===e.insertAt)r?r.nextSibling?n.insertBefore(t,r.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),w.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=w.indexOf(e);t>=0&&w.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",l(t,e.attrs),o(e,t),t}function u(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",l(t,e.attrs),o(e,t),t}function l(e,t){Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])})}function c(e,t){var n,r,i,o;if(t.transform&&e.css){if(o=t.transform(e.css),!o)return function(){};e.css=o}if(t.singleton){var l=g++;n=b||(b=s(t)),r=f.bind(null,n,l,!1),i=f.bind(null,n,l,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=u(t),r=p.bind(null,n,t),i=function(){a(n),n.href&&URL.revokeObjectURL(n.href)}):(n=s(t),r=d.bind(null,n),i=function(){a(n)});return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}function f(e,t,n,r){var i=n?"":r.css;if(e.styleSheet)e.styleSheet.cssText=C(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function d(e,t){var n=t.css,r=t.media;if(r&&e.setAttribute("media",r),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}function p(e,t,n){var r=n.css,i=n.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(r=x(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var h={},m=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},v=m(function(){return window&&document&&document.all&&!window.atob}),y=function(e){var t={};return function(n){return"undefined"==typeof t[n]&&(t[n]=e.call(this,n)),t[n]}}(function(e){return document.querySelector(e)}),b=null,g=0,w=[],x=n(73);e.exports=function(e,t){t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var n=i(e,t);return r(n,t),function(e){for(var o=[],a=0;a<n.length;a++){var s=n[a],u=h[s.id];u.refs--,o.push(u)}if(e){var l=i(e,t);r(l,t)}for(var a=0;a<o.length;a++){var u=o[a];if(0===u.refs){for(var c=0;c<u.parts.length;c++)u.parts[c]();delete h[u.id]}}}};var C=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},73:function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var n=t.protocol+"//"+t.host,r=n+t.pathname.replace(/\/[^\/]*$/,"/"),i=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:r+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"});return i}},83:function(e,t){e.exports=a},84:function(e,t){e.exports=s}})});